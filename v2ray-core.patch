 envoy/v2ray.go                | 31 +++++++++++++++++++++++++++++++
 main/commands/base/execute.go |  6 ++----
 2 files changed, 33 insertions(+), 4 deletions(-)

diff --git a/envoy/v2ray.go b/envoy/v2ray.go
new file mode 100644
index 00000000..858ac9b5
--- /dev/null
+++ b/envoy/v2ray.go
@@ -0,0 +1,31 @@
+package v2ray
+
+// copied and modified from main/main.go
+
+import (
+	"github.com/v2fly/v2ray-core/v5/main/commands"
+	"github.com/v2fly/v2ray-core/v5/main/commands/base"
+	_ "github.com/v2fly/v2ray-core/v5/main/distro/all"
+)
+
+func Start(configPath string) {
+	args := []string{"run", "-c", configPath}
+
+	base.RootCommand.Long = "A unified platform for anti-censorship."
+	base.RegisterCommand(commands.CmdRun)
+	base.SortLessFunc = runIsTheFirst
+	base.SortCommands()
+	base.Execute(args)
+}
+
+func runIsTheFirst(i, j *base.Command) bool {
+	left := i.Name()
+	right := j.Name()
+	if left == "run" {
+		return true
+	}
+	if right == "run" {
+		return false
+	}
+	return left < right
+}
diff --git a/main/commands/base/execute.go b/main/commands/base/execute.go
index 802f01c2..2de5baa6 100644
--- a/main/commands/base/execute.go
+++ b/main/commands/base/execute.go
@@ -1,7 +1,7 @@
 package base
 
 import (
-	"flag"
+	// "flag"
 	"fmt"
 	"os"
 	"sort"
@@ -13,9 +13,7 @@ import (
 // copied from "github.com/golang/go/main.go"
 
 // Execute excute the commands
-func Execute() {
-	flag.Parse()
-	args := flag.Args()
+func Execute(args []string) {
 	if len(args) < 1 {
 		PrintUsage(os.Stderr, RootCommand)
 		return
